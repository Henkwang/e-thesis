<?php
/**
 * Created by PhpStorm.
 * User: attapon.th
 * Date: 17/3/2558
 * Time: 10:24
 */

$table_name = 'groupuser_' . rand(0, 999999);
?>
<br/><br/>
<div class="row">
    <div class="col-xs-8 col-xs-offset-2">
        <form id="<?= $formname ?>" class="form-horizontal" onsubmit="return false">
            <div class="row">
                <div class="col-xs-6">
                    <div class="form-group">
                        <div class="input-group">
                            <?= $labelgroup['GRP_NAME_TH'] ?>
                            <?= $input['GRP_NAME_TH'] ?>
                        </div>
                    </div>
                </div>
                <div class="col-xs-6">
                    <div class="form-group">
                        <div class="input-group">
                            <?= $labelgroup['GRP_NAME_EN'] ?>
                            <?= $input['GRP_NAME_EN'] ?>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-6">
                    <div class="form-group">
                        <div class="input-group">
                            <?= $labelgroup['ENABLE'] ?>
                            <?= $input['ENABLE'] ?>
                        </div>
                    </div>
                </div>
                <div class="col-xs-6">
                    <div class="form-group">
                        <div class="input-group">
                            <?= $labelgroup['GRP_USER_TYPE'] ?>
                            <?= $input['GRP_USER_TYPE'] ?>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-offset-5">
                    <button type="submit" class="btn btn-primary btn-raised"
                            onclick="O<?= $table_name ?>.search(JSON.stringify($('#<?= $formname ?>').serializeArray())).draw();">
                        <i class="md-search"></i> <?= $Lang->label('SEARCH') ?></button>
                    <button type="reset" class="btn btn-default btn-raised">
                        <i class="md-refresh"></i> <?= $Lang->label('CLEAR') ?></button>
                </div>
            </div>
        </form>

    </div>
</div>
<hr/>
<div class="row">
    <div class="col-sm-12">
        <table id="<?= $table_name ?>" class="display cell-border hover" cellspacing="0" width="100%"></table>
        <script>
            $.material.init();
            var O<?=$table_name?> = $('#<?=$table_name?>').DataTable({
                processing: true,
                serverSide: true,
                ajax: {
                    url: '<?=$di->url->get('system/groupuser/getdata');?>',
                    type: 'POST'
                },
                language: (lang == 'th' ? {
                    "sProcessing": "กำลังดำเนินการ...",
                    "sLengthMenu": "แสดง_MENU_ แถว",
                    "sZeroRecords": "ไม่พบข้อมูล",
                    "sInfo": "แสดง _START_ ถึง _END_ จาก _TOTAL_ แถว",
                    "sInfoEmpty": "แสดง 0 ถึง 0 จาก 0 แถว",
                    "sInfoFiltered": "(กรองข้อมูล _MAX_ ทุกแถว)",
                    "sInfoPostFix": "",
                    "sSearch": "ค้นหา:",
                    "sUrl": "",
                    "oPaginate": {"sFirst": "เริ่มต้น", "sPrevious": "ก่อนหน้า", "sNext": "ถัดไป", "sLast": "สุดท้าย"}
                } : ''),
                dom: '<"#top">rt<"#bottom"ilp>',
                columns: decode_json('<?php
                /*
                  'name' => '',
                    'data' => [],
                    'className' => null,
                    'searchable' => false,
                    'orderable' => true,
                    'width' => null,
                    'visible' => true,
                    'title' => ''
                 */

                    echo json_encode([
                    ['name' => 'GRP_ID','data' => 'GRP_ID','orderable' => false, 'visible'=>false],
                    ['name' => 'GRP_NAME_TH','data' => 'GRP_NAME_TH','orderable' => true,'title' => $Lang->label('GRP_NAME_TH')],
                    ['name' => 'GRP_NAME_EN','data' => 'GRP_NAME_EN','orderable' => true,'title' => $Lang->label('GRP_NAME_EN')],
                    ['name' => 'ENABLE','data' => 'ENABLE','orderable' => true,'title' => $Lang->label('ENABLE')],
                    ['name' => 'GRP_TOPMENU','data' => 'GRP_TOPMENU','orderable' => true,'title' => $Lang->label('GRP_TOPMENU')],
                    ['name' => 'GRP_USER_TYPE','data' =>  'GRP_USER_TYPE','orderable' => true,'title' => $Lang->label('GRP_USER_TYPE')],
                    ['name' => 'GRP_TOPMENU','data' => 'GRP_TOPMENU','orderable' => true,'title' => $Lang->label('GRP_TOPMENU')],
                    ]);
                ?>')
            });


        </script>
    </div>
</div>
